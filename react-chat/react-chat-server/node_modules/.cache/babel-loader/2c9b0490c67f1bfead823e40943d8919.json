{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\kusha\\\\Desktop\\\\student--bhattadm\\\\work\\\\react-chat\\\\react-chat-server\\\\src\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { createSession } from './services';\n\nconst Login = function ({\n  onLogin\n}) {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [isDisabled, setIsDisabled] = useState(true);\n  const [isPending, setIsPending] = useState(false);\n  const [status, setStatus] = useState('');\n\n  const onChange = e => {\n    setStatus('');\n    setUsername(e.target.value);\n    setIsDisabled(!e.target.value);\n  };\n\n  const login = () => {\n    setIsPending(true);\n    createSession({\n      username\n    }).then(userinfo => {\n      onLogin({\n        username,\n        userList: userinfo.userList,\n        messageList: userinfo.messageList\n      }); // onLogin({username,userinfo });\n\n      setStatus('');\n      setIsPending(false);\n    }).catch(err => {\n      setStatus(err.error); // TODO: convert to friendly message\n\n      setIsPending(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [status && /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"status\",\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Username:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        disabled: isPending,\n        onChange: onChange,\n        value: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: login,\n        disabled: isDisabled || isPending,\n        children: isPending ? \"...\" : \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"if4K2exPmHJJ+B/MDQ2e6uq54/U=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/src/Login.jsx"],"names":["useState","createSession","Login","onLogin","username","setUsername","isDisabled","setIsDisabled","isPending","setIsPending","status","setStatus","onChange","e","target","value","login","then","userinfo","userList","messageList","catch","err","error"],"mappings":";;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,aAAT,QAA8B,YAA9B;;AAEA,MAAMC,KAAK,GAAG,UAAS;AAACC,EAAAA;AAAD,CAAT,EAAmB;AAAA;;AAC7B,QAAK,CAACC,QAAD,EAAUC,WAAV,IAAyBL,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAK,CAACM,UAAD,EAAYC,aAAZ,IAA4BP,QAAQ,CAAC,IAAD,CAAzC;AACA,QAAM,CAACQ,SAAD,EAAYC,YAAZ,IAA4BT,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACU,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;;AAEA,QAAMY,QAAQ,GAAIC,CAAD,IAAO;AACtBF,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAN,IAAAA,WAAW,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AACAR,IAAAA,aAAa,CAAC,CAACM,CAAC,CAACC,MAAF,CAASC,KAAX,CAAb;AACD,GAJD;;AAMA,QAAMC,KAAK,GAAG,MAAM;AAClBP,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAR,IAAAA,aAAa,CAAC;AAAEG,MAAAA;AAAF,KAAD,CAAb,CACCa,IADD,CACOC,QAAQ,IAAI;AAChBf,MAAAA,OAAO,CAAC;AAAEC,QAAAA,QAAF;AAAYe,QAAAA,QAAQ,EAAED,QAAQ,CAACC,QAA/B;AAAwCC,QAAAA,WAAW,EAACF,QAAQ,CAACE;AAA7D,OAAD,CAAP,CADgB,CAEjB;;AACAT,MAAAA,SAAS,CAAC,EAAD,CAAT;AACAF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAND,EAOCY,KAPD,CAOQC,GAAG,IAAI;AACbX,MAAAA,SAAS,CAACW,GAAG,CAACC,KAAL,CAAT,CADa,CACQ;;AACrBd,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAVD;AAWD,GAbD;;AAeA,sBACA;AAAA,eACIC,MAAM,iBAAI;AAAK,MAAA,KAAK,EAAC,QAAX;AAAA,gBAAqBA;AAArB;AAAA;AAAA;AAAA;AAAA,YADd,eAEE;AAAA,2CAEE;AAAO,QAAA,QAAQ,EAAIF,SAAnB;AAA8B,QAAA,QAAQ,EAAII,QAA1C;AAAoD,QAAA,KAAK,EAAIR;AAA7D;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAQ,QAAA,OAAO,EAAIY,KAAnB;AAA0B,QAAA,QAAQ,EAAGV,UAAU,IAAIE,SAAnD;AAAA,kBAAgEA,SAAS,GAAG,KAAH,GAAS;AAAlF;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAUH,CArCD;;GAAMN,K;;KAAAA,K;AAsCN,eAAeA,KAAf","sourcesContent":["import { useState } from 'react';\r\nimport { createSession } from './services';\r\n\r\nconst Login = function({onLogin}){\r\n    const[username,setUsername] = useState('');\r\n    const[isDisabled,setIsDisabled]= useState(true);\r\n    const [isPending, setIsPending] = useState(false);\r\n    const [status, setStatus] = useState('');\r\n\r\n    const onChange = (e) => {\r\n      setStatus('');\r\n      setUsername(e.target.value);\r\n      setIsDisabled(!e.target.value);\r\n    };\r\n\r\n    const login = () => {\r\n      setIsPending(true);\r\n      createSession({ username })\r\n      .then( userinfo => {\r\n         onLogin({ username, userList: userinfo.userList,messageList:userinfo.messageList });\r\n        // onLogin({username,userinfo });\r\n        setStatus('');\r\n        setIsPending(false);\r\n      })\r\n      .catch( err => {\r\n        setStatus(err.error);// TODO: convert to friendly message\r\n        setIsPending(false);\r\n      });\r\n    };\r\n  \r\n    return (\r\n    <div>\r\n      { status && <div class=\"status\">{status}</div>}\r\n      <label>\r\n        Username:\r\n        <input disabled = {isPending} onChange = {onChange} value = {username}></input>\r\n        <button onClick = {login} disabled ={isDisabled || isPending}>{ isPending ? \"...\":\"Login\"}</button>\r\n      </label>\r\n    </div>\r\n    );\r\n};\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}