{"ast":null,"code":"import _objectSpread from\"C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import'./App.css';import{useState,useEffect}from'react';import{fetchEndSession,fetchCheckSession}from'./services';import Nav from'./Nav';import Login from'./Login';import ShowStuff from'./ShowStuff';function App(){var _useState=useState({isLoggedIn:false,isPending:true}),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];useEffect(function(){fetchCheckSession().then(function(userinfo){setUserState({isLoggedIn:true,isPending:false});setUserName(userinfo.username);}).catch(function(){setUserState({isLoggedIn:false,isPending:false});});},[]);var login=function login(_ref){var username=_ref.username;setUserState({isLoggedIn:true,isPending:false});setUserName(username);};if(userState.isPending){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:\"Loading...\"});}var logout=function logout(){setUserState(_objectSpread(_objectSpread({},userState),{},{isPending:true}));fetchEndSession().then(function(){setUserState({isLoggedIn:false,isPending:false});}).catch(function(){setUserState(_objectSpread(_objectSpread({},userState),{},{isPending:false}));});};var content;if(userState.isLoggedIn){content=/*#__PURE__*/_jsx(ShowStuff,{username:userName});}else{content=/*#__PURE__*/_jsx(Login,{onLogin:login});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"title\",children:\"Chat Room\"}),/*#__PURE__*/_jsx(Nav,{user:userState,onLogout:logout}),content]});}export default App;","map":{"version":3,"sources":["C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/src/App.jsx"],"names":["useState","useEffect","fetchEndSession","fetchCheckSession","Nav","Login","ShowStuff","App","isLoggedIn","isPending","userState","setUserState","userName","setUserName","then","userinfo","username","catch","login","logout","content"],"mappings":"ydACA,MAAO,WAAP,CACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,eAAT,CAA0BC,iBAA1B,KAAmD,YAAnD,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACoBP,QAAQ,CAAC,CAAEQ,UAAU,CAAE,KAAd,CAAqBC,SAAS,CAAE,IAAhC,CAAD,CAD5B,wCACNC,SADM,eACIC,YADJ,8BAEkBX,QAAQ,CAAC,EAAD,CAF1B,yCAENY,QAFM,eAEGC,WAFH,eAIbZ,SAAS,CAAE,UAAM,CACfE,iBAAiB,GAChBW,IADD,CACO,SAAAC,QAAQ,CAAI,CACjBJ,YAAY,CAAC,CACXH,UAAU,CAAE,IADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAIAI,WAAW,CAACE,QAAQ,CAACC,QAAV,CAAX,CACD,CAPD,EAQCC,KARD,CAQQ,UAAM,CACZN,YAAY,CAAC,CACXH,UAAU,CAAE,KADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAID,CAbD,EAcD,CAfQ,CAeN,EAfM,CAAT,CAiBA,GAAMS,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAqB,IAAXF,CAAAA,QAAW,MAAXA,QAAW,CACjCL,YAAY,CAAC,CACXH,UAAU,CAAE,IADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAIAI,WAAW,CAACG,QAAD,CAAX,CACD,CAND,CAQA,GAAGN,SAAS,CAACD,SAAb,CAAwB,CACtB,mBACE,YAAK,SAAS,CAAC,KAAf,wBADF,CAKD,CAED,GAAMU,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAW,CACxBR,YAAY,gCACPD,SADO,MAEVD,SAAS,CAAE,IAFD,GAAZ,CAIAP,eAAe,GACdY,IADD,CACO,UAAM,CACXH,YAAY,CAAC,CACXH,UAAU,CAAE,KADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAID,CAND,EAOCQ,KAPD,CAOQ,UAAM,CACZN,YAAY,gCACPD,SADO,MAEVD,SAAS,CAAE,KAFD,GAAZ,CAID,CAZD,EAaD,CAlBD,CAoBA,GAAIW,CAAAA,OAAJ,CACA,GAAGV,SAAS,CAACF,UAAb,CAAyB,CACvBY,OAAO,cAAG,KAAC,SAAD,EAAW,QAAQ,CAAER,QAArB,EAAV,CACD,CAFD,IAGK,CACHQ,OAAO,cAAG,KAAC,KAAD,EAAO,OAAO,CAAEF,KAAhB,EAAV,CACD,CAED,mBACE,aAAK,SAAS,CAAC,KAAf,wBACA,WAAI,KAAK,CAAG,OAAZ,uBADA,cAEA,KAAC,GAAD,EAAK,IAAI,CAAER,SAAX,CAAsB,QAAQ,CAAES,MAAhC,EAFA,CAGEC,OAHF,GADF,CAOD,CAED,cAAeb,CAAAA,GAAf","sourcesContent":["\nimport './App.css';\nimport { useState, useEffect } from 'react';\nimport { fetchEndSession, fetchCheckSession } from './services';\nimport Nav from './Nav';\nimport Login from './Login';\nimport ShowStuff from './ShowStuff';\n\nfunction App() {\n  const [userState,setUserState] = useState({ isLoggedIn: false, isPending: true });\n  const [userName,setUserName] = useState('');\n\n  useEffect( () => {\n    fetchCheckSession()\n    .then( userinfo => {\n      setUserState({\n        isLoggedIn: true,\n        isPending: false,\n      });\n      setUserName(userinfo.username);\n    })\n    .catch( () => {\n      setUserState({\n        isLoggedIn: false,\n        isPending: false,\n      });\n    });\n  }, []); \n\n  const login = function({username}) {\n    setUserState({\n      isLoggedIn: true,\n      isPending: false,\n    });\n    setUserName(username);\n  };\n\n  if(userState.isPending) {\n    return (\n      <div className=\"app\">\n        Loading...\n      </div>\n    );\n  }\n\n  const logout = function() {\n    setUserState({\n      ...userState,\n      isPending: true,\n    });\n    fetchEndSession()\n    .then( () => {\n      setUserState({\n        isLoggedIn: false,\n        isPending: false,\n      });\n    })\n    .catch( () => {\n      setUserState({\n        ...userState,\n        isPending: false,\n      });\n    });\n  };\n\n  let content;\n  if(userState.isLoggedIn) {\n    content = <ShowStuff username={userName}/>;\n  } \n  else {\n    content = <Login onLogin={login}/>;\n  }\n\n  return (\n    <div className=\"app\">\n    <h2 class = \"title\">Chat Room</h2>\n    <Nav user={userState} onLogout={logout}/>\n     {content}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}