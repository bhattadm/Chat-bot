{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\kusha\\\\desktop\\\\student--bhattadm\\\\work\\\\react-chat\\\\react-chat-server\\\\src\\\\ShowStuff.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { fetchEndSession, fetchCheckSession, fetchGetChat, fetchSendMessage } from './services'; // import ChatUserList from './ChatUserList';\n// import ChatOutgoing from './ChatOutgoing';\n\nconst ShowStuff = ({\n  username\n}) => {\n  _s();\n\n  const [userList, setUserList] = useState('');\n  const [messageList, setMessageList] = useState('');\n  const [error, setError] = useState('');\n  const [text, setText] = useState('');\n  const [isGreyedout, setisGreyedout] = useState(true);\n  const [isLoading, setisLoading] = useState(false);\n  const [statusmsg, setstatusmsg] = useState('');\n  useEffect(() => {\n    getChatList();\n    const intervalId = setInterval(() => {\n      getChatList();\n    }, 5000);\n    return function cleanup() {\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  const getChatList = () => {\n    fetchGetChat().then(chatList => {\n      setUserList(chatList.userList);\n      setMessageList(chatList.messageList);\n    }).catch(err => {\n      setError(err.error);\n    });\n  }; //  const sendmessage = function({userList,messageList}) {\n  //   setUserList(chatList.userList);\n  //   setMessageList(chatList.messageList)\n  //   };\n\n\n  const onChange = e => {\n    setstatusmsg('');\n    setText(e.target.value);\n    setisGreyedout(!e.target.value);\n  };\n\n  const sendmessage = () => {\n    setisLoading(true);\n    fetchSendMessage({\n      username,\n      text\n    }).then(chatList => {\n      // onSend({userList: chatList.userList, messageList:chatList.messageList });\n      setUserList(chatList.userList);\n      setMessageList(chatList.messageList);\n      setText('');\n      setstatusmsg('');\n      setisLoading(false);\n    }).catch(err => {\n      setText('');\n      setstatusmsg(err.error);\n      setisLoading(false);\n    });\n  }; // const usercontent   = <ChatUserList userList = {userList}/>;\n  // const outgoingcontent = <ChatOutgoing username = {username} messageList = {messageList} onSend = {sendmessage}/>;\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"display-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"User:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.values(userList).map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"user\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"username\",\n              children: user.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Messages:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: Object.values(messageList).map(message => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"messages\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              class: \"messagetext\",\n              children: [message.sender, \":\", message.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message.timestamp\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [statusmsg && /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"status\",\n        children: statusmsg\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Send Message:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          disabled: isLoading,\n          onChange: onChange,\n          value: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendmessage,\n        disabled: isGreyedout || isLoading,\n        children: isLoading ? \"...\" : \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ShowStuff, \"AqOdPPoYn08ZGG0glK2VwUf7L8s=\");\n\n_c = ShowStuff;\nexport default ShowStuff;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowStuff\");","map":{"version":3,"sources":["C:/Users/kusha/desktop/student--bhattadm/work/react-chat/react-chat-server/src/ShowStuff.jsx"],"names":["useEffect","useState","fetchEndSession","fetchCheckSession","fetchGetChat","fetchSendMessage","ShowStuff","username","userList","setUserList","messageList","setMessageList","error","setError","text","setText","isGreyedout","setisGreyedout","isLoading","setisLoading","statusmsg","setstatusmsg","getChatList","intervalId","setInterval","cleanup","clearInterval","then","chatList","catch","err","onChange","e","target","value","sendmessage","Object","values","map","user","message","sender","timestamp"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,eAAT,EAA0BC,iBAA1B,EAA6CC,YAA7C,EAA0DC,gBAA1D,QAAkF,YAAlF,C,CACA;AACA;;AAEA,MAAMC,SAAS,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAGlC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,WAAD,EAAcC,cAAd,IAAgCV,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,EAAD,CAAlC;AAEA,QAAM,CAACa,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACe,WAAD,EAAcC,cAAd,IAAgChB,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACmB,SAAD,EAAYC,YAAZ,IAA4BpB,QAAQ,CAAC,EAAD,CAA1C;AAGFD,EAAAA,SAAS,CAAE,MAAI;AACdsB,IAAAA,WAAW;AACZ,UAAMC,UAAU,GAAGC,WAAW,CAAC,MAAM;AACnCF,MAAAA,WAAW;AACZ,KAF6B,EAE3B,IAF2B,CAA9B;AAGA,WAAO,SAASG,OAAT,GAAmB;AACxBC,MAAAA,aAAa,CAACH,UAAD,CAAb;AACD,KAFD;AAGC,GARQ,EAQP,EARO,CAAT;;AASA,QAAMD,WAAW,GAAG,MAAI;AACtBlB,IAAAA,YAAY,GACbuB,IADC,CACKC,QAAD,IAAY;AAChBnB,MAAAA,WAAW,CAACmB,QAAQ,CAACpB,QAAV,CAAX;AACAG,MAAAA,cAAc,CAACiB,QAAQ,CAAClB,WAAV,CAAd;AACD,KAJC,EAKDmB,KALC,CAKMC,GAAD,IAAS;AACdjB,MAAAA,QAAQ,CAACiB,GAAG,CAAClB,KAAL,CAAR;AACD,KAPC;AAQD,GATD,CAtBoC,CAiCpC;AACA;AACA;AACA;;;AAEA,QAAMmB,QAAQ,GAAIC,CAAD,IAAO;AACtBX,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAN,IAAAA,OAAO,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAP;AACAjB,IAAAA,cAAc,CAAC,CAACe,CAAC,CAACC,MAAF,CAASC,KAAX,CAAd;AACD,GAJD;;AAMA,QAAMC,WAAW,GAAE,MAAI;AACvBhB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAd,IAAAA,gBAAgB,CAAC;AAACE,MAAAA,QAAD;AAAWO,MAAAA;AAAX,KAAD,CAAhB,CACCa,IADD,CACOC,QAAQ,IAAI;AACjB;AACAnB,MAAAA,WAAW,CAACmB,QAAQ,CAACpB,QAAV,CAAX;AACAG,MAAAA,cAAc,CAACiB,QAAQ,CAAClB,WAAV,CAAd;AACAK,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAM,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACAF,MAAAA,YAAY,CAAC,KAAD,CAAZ;AAED,KATD,EAUCU,KAVD,CAUQC,GAAG,IAAI;AACXf,MAAAA,OAAO,CAAC,EAAD,CAAP;AACAM,MAAAA,YAAY,CAACS,GAAG,CAAClB,KAAL,CAAZ;AACAO,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,KAdD;AAeC,GAjBD,CA5CoC,CAkEpC;AACA;;;AACE,sBACE;AAAK,IAAA,KAAK,EAAG,eAAb;AAAA,4BACE;AAAA,8BACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADE,eAEF;AAAA,kBACGiB,MAAM,CAACC,MAAP,CAAc7B,QAAd,EAAwB8B,GAAxB,CAA6BC,IAAI,iBAChC;AAAA,iCACI;AAAK,YAAA,KAAK,EAAC,MAAX;AAAA,mCACA;AAAM,cAAA,KAAK,EAAC,UAAZ;AAAA,wBAAwBA,IAAI,CAAChC;AAA7B;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAFE;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAYA;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,kBACG6B,MAAM,CAACC,MAAP,CAAc3B,WAAd,EAA2B4B,GAA3B,CAAgCE,OAAO,iBACtC;AAAA,iCACA;AAAK,YAAA,KAAK,EAAC,UAAX;AAAA,oCACE;AAAM,cAAA,KAAK,EAAG,aAAd;AAAA,yBAA6BA,OAAO,CAACC,MAArC,OAA8CD,OAAO,CAAC1B,IAAtD;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA,wBAAI0B,OAAO,CAACE;AAAZ;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YAZA,eAwBE;AAAA,iBACItB,SAAS,iBAAI;AAAK,QAAA,KAAK,EAAC,QAAX;AAAA,kBAAqBA;AAArB;AAAA;AAAA;AAAA;AAAA,cADjB,eAEE;AAAA,iDAEE;AAAO,UAAA,QAAQ,EAAEF,SAAjB;AAA4B,UAAA,QAAQ,EAAEa,QAAtC;AAAgD,UAAA,KAAK,EAAEjB;AAAvD;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAME;AAAQ,QAAA,OAAO,EAAEqB,WAAjB;AAA8B,QAAA,QAAQ,EAAEnB,WAAW,IAAIE,SAAvD;AAAA,kBAAqEA,SAAS,GAAG,KAAH,GAAW;AAAzF;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAxBF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmCD,CAvGD;;GAAMZ,S;;KAAAA,S;AAwGN,eAAeA,SAAf","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { fetchEndSession, fetchCheckSession, fetchGetChat,fetchSendMessage } from './services';\r\n// import ChatUserList from './ChatUserList';\r\n// import ChatOutgoing from './ChatOutgoing';\r\n\r\nconst ShowStuff = ({ username }) => {\r\n\r\n \r\n  const [userList, setUserList] = useState('');\r\n  const [messageList, setMessageList] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const [text, setText] = useState('');\r\n  const [isGreyedout, setisGreyedout] = useState(true);\r\n  const [isLoading, setisLoading] = useState(false);\r\n  const [statusmsg, setstatusmsg] = useState('');\r\n\r\n\r\nuseEffect (()=>{\r\n getChatList();\r\nconst intervalId = setInterval(() => {\r\n  getChatList();\r\n}, 5000);\r\nreturn function cleanup() {\r\n  clearInterval(intervalId);\r\n};\r\n},[]);  \r\nconst getChatList = ()=>{\r\n  fetchGetChat()\r\n.then((chatList)=>{\r\n  setUserList(chatList.userList)\r\n  setMessageList(chatList.messageList)\r\n})\r\n.catch((err) => {\r\n  setError(err.error);\r\n});\r\n}\r\n\r\n//  const sendmessage = function({userList,messageList}) {\r\n//   setUserList(chatList.userList);\r\n//   setMessageList(chatList.messageList)\r\n//   };\r\n\r\nconst onChange = (e) => {\r\n  setstatusmsg('');\r\n  setText(e.target.value);\r\n  setisGreyedout(!e.target.value);\r\n};\r\n\r\nconst sendmessage= ()=>{\r\nsetisLoading(true);\r\nfetchSendMessage({username ,text})\r\n.then( chatList => {\r\n  // onSend({userList: chatList.userList, messageList:chatList.messageList });\r\n  setUserList(chatList.userList)\r\n  setMessageList(chatList.messageList)\r\n  setText('');\r\n  setstatusmsg('');\r\n  setisLoading(false);\r\n  \r\n})\r\n.catch( err => {\r\n    setText('');\r\n    setstatusmsg(err.error);\r\n    setisLoading(false);\r\n});\r\n};\r\n\r\n\r\n  \r\n\r\n// const usercontent   = <ChatUserList userList = {userList}/>;\r\n// const outgoingcontent = <ChatOutgoing username = {username} messageList = {messageList} onSend = {sendmessage}/>;\r\n  return (\r\n    <div class = \"display-panel\">\r\n      <div>\r\n    <h3>User:</h3>\r\n    <ul>\r\n      {Object.values(userList).map( user => (\r\n        <li>\r\n            <div class=\"user\">\r\n            <span class=\"username\">{user.username}</span>\r\n            </div>\r\n        </li> ) ) }\r\n    </ul>\r\n    </div>\r\n    <div>\r\n      <h3>Messages:</h3>\r\n      <ul>\r\n        {Object.values(messageList).map( message => (\r\n          <li>\r\n          <div class=\"messages\">\r\n            <span class = \"messagetext\">{message.sender}:{message.text}</span>\r\n            <p>{message.timestamp}</p>\r\n          </div>\r\n        </li> ) ) }\r\n      </ul>\r\n      </div>\r\n      <div>\r\n        { statusmsg && <div class=\"status\">{statusmsg}</div>}\r\n        <label>\r\n          Send Message:\r\n          <input disabled={isLoading} onChange={onChange} value={text} />\r\n        </label>\r\n        <button onClick={sendmessage} disabled={isGreyedout || isLoading} >{ isLoading ? \"...\" : \"Send\"}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ShowStuff;\r\n"]},"metadata":{},"sourceType":"module"}