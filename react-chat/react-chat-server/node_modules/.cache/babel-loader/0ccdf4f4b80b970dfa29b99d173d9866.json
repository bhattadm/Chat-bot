{"ast":null,"code":"import _objectSpread from\"C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import'./App.css';import{useState,useEffect}from'react';import{endSession,checkSession}from'./services';import Nav from'./Nav';import Login from'./Login';import ShowStuff from'./ShowStuff';function App(){var _useState=useState({isLoggedIn:false,isPending:true}),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];useEffect(function(){checkSession().then(function(userinfo){setUserState({isLoggedIn:true,isPending:false,username:userinfo.username,info:userinfo.info,userList:userinfo.userList,messageList:userinfo.messageList});}).catch(function(){// We treat any failure as not logged in\nsetUserState({isLoggedIn:false,isPending:false});});},[]);// only run on initial render\nvar login=function login(_ref){var username=_ref.username,info=_ref.info,userList=_ref.userList,messageList=_ref.messageList;setUserState({isLoggedIn:true,isPending:false,username:username,info:info,userList:userList,messageList:messageList});};if(userState.isPending){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:\"Loading...\"});}var logout=function logout(){// Inform UI to wait\nsetUserState(_objectSpread(_objectSpread({},userState),{},{isPending:true}));// Begin logout\nendSession().then(function(){setUserState({isLoggedIn:false,isPending:false});}).catch(function(){// TODO: notify user of issue\nsetUserState(_objectSpread(_objectSpread({},userState),{},{isPending:false}));});};var content;if(userState.isLoggedIn){content=/*#__PURE__*/_jsx(ShowStuff,{stuff:userState});}else{content=/*#__PURE__*/_jsx(Login,{onLogin:login});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Nav,{user:userState,onLogout:logout}),content]});}export default App;","map":{"version":3,"sources":["C:/Users/kusha/Desktop/student--bhattadm/work/react-chat/react-chat-server/src/App.jsx"],"names":["useState","useEffect","endSession","checkSession","Nav","Login","ShowStuff","App","isLoggedIn","isPending","userState","setUserState","then","userinfo","username","info","userList","messageList","catch","login","logout","content"],"mappings":"ydACA,MAAO,WAAP,CACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,YAAzC,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACoBP,QAAQ,CAAC,CAAEQ,UAAU,CAAE,KAAd,CAAqBC,SAAS,CAAE,IAAhC,CAAD,CAD5B,wCACNC,SADM,eACIC,YADJ,eAEbV,SAAS,CAAE,UAAM,CACfE,YAAY,GACXS,IADD,CACO,SAAAC,QAAQ,CAAI,CACjBF,YAAY,CAAC,CACXH,UAAU,CAAE,IADD,CAEXC,SAAS,CAAE,KAFA,CAGXK,QAAQ,CAAED,QAAQ,CAACC,QAHR,CAIXC,IAAI,CAACF,QAAQ,CAACE,IAJH,CAKVC,QAAQ,CAACH,QAAQ,CAACG,QALR,CAMXC,WAAW,CAAEJ,QAAQ,CAACI,WANX,CAAD,CAAZ,CAQD,CAVD,EAWCC,KAXD,CAWQ,UAAM,CACZ;AACAP,YAAY,CAAC,CACXH,UAAU,CAAE,KADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAID,CAjBD,EAkBD,CAnBQ,CAmBN,EAnBM,CAAT,CAmBQ;AAER,GAAMU,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAA+C,IAArCL,CAAAA,QAAqC,MAArCA,QAAqC,CAA5BC,IAA4B,MAA5BA,IAA4B,CAAvBC,QAAuB,MAAvBA,QAAuB,CAAdC,WAAc,MAAdA,WAAc,CAC3DN,YAAY,CAAC,CACXH,UAAU,CAAE,IADD,CAEXC,SAAS,CAAE,KAFA,CAGXK,QAAQ,CAARA,QAHW,CAIXC,IAAI,CAAJA,IAJW,CAKXC,QAAQ,CAARA,QALW,CAMXC,WAAW,CAAXA,WANW,CAAD,CAAZ,CAQD,CATD,CAWA,GAAGP,SAAS,CAACD,SAAb,CAAwB,CACtB,mBACE,YAAK,SAAS,CAAC,KAAf,wBADF,CAKD,CACD,GAAMW,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAW,CACxB;AACAT,YAAY,gCACPD,SADO,MAEVD,SAAS,CAAE,IAFD,GAAZ,CAIA;AACAP,UAAU,GACTU,IADD,CACO,UAAM,CACXD,YAAY,CAAC,CACXH,UAAU,CAAE,KADD,CAEXC,SAAS,CAAE,KAFA,CAAD,CAAZ,CAID,CAND,EAOCS,KAPD,CAOQ,UAAM,CACZ;AACAP,YAAY,gCACPD,SADO,MAEVD,SAAS,CAAE,KAFD,GAAZ,CAID,CAbD,EAcD,CArBD,CAsBA,GAAIY,CAAAA,OAAJ,CACA,GAAGX,SAAS,CAACF,UAAb,CAAyB,CACvBa,OAAO,cAAG,KAAC,SAAD,EAAW,KAAK,CAAEX,SAAlB,EAAV,CACD,CAFD,IAEO,CACLW,OAAO,cAAG,KAAC,KAAD,EAAO,OAAO,CAAEF,KAAhB,EAAV,CACD,CACD,mBACE,aAAK,SAAS,CAAC,KAAf,wBACA,KAAC,GAAD,EAAK,IAAI,CAAET,SAAX,CAAsB,QAAQ,CAAEU,MAAhC,EADA,CAEEC,OAFF,GADF,CAMD,CAED,cAAed,CAAAA,GAAf","sourcesContent":["\nimport './App.css';\nimport { useState, useEffect } from 'react';\nimport { endSession, checkSession } from './services';\nimport Nav from './Nav';\nimport Login from './Login';\nimport ShowStuff from './ShowStuff';\n\nfunction App() {\n  const [userState,setUserState] = useState({ isLoggedIn: false, isPending: true });\n  useEffect( () => {\n    checkSession()\n    .then( userinfo => {\n      setUserState({\n        isLoggedIn: true,\n        isPending: false,\n        username: userinfo.username,\n        info:userinfo.info,\n         userList:userinfo.userList,\n        messageList: userinfo.messageList,\n      });\n    })\n    .catch( () => {\n      // We treat any failure as not logged in\n      setUserState({\n        isLoggedIn: false,\n        isPending: false,\n      });\n    });\n  }, []); // only run on initial render\n\n  const login = function({username,info,userList,messageList}) {\n    setUserState({\n      isLoggedIn: true,\n      isPending: false,\n      username,\n      info,\n      userList,\n      messageList,\n    });\n  };\n\n  if(userState.isPending) {\n    return (\n      <div className=\"app\">\n        Loading...\n      </div>\n    );\n  }\n  const logout = function() {\n    // Inform UI to wait\n    setUserState({\n      ...userState,\n      isPending: true,\n    });\n    // Begin logout\n    endSession()\n    .then( () => {\n      setUserState({\n        isLoggedIn: false,\n        isPending: false,\n      });\n    })\n    .catch( () => {\n      // TODO: notify user of issue\n      setUserState({\n        ...userState,\n        isPending: false,\n      });\n    });\n  };\n  let content;\n  if(userState.isLoggedIn) {\n    content = <ShowStuff stuff={userState}/>;\n  } else {\n    content = <Login onLogin={login}/>;\n  }\n  return (\n    <div className=\"app\">\n    <Nav user={userState} onLogout={logout}/>\n     {content}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}